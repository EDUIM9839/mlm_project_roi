<!--start overlay-->	<div class="overlay toggle-icon"></div>
		<!--end overlay-->
		<!--Start Back To Top Button--> <a href="javaScript:;" class="back-to-top"><i class='bx bxs-up-arrow-alt'></i></a>
		<!--End Back To Top Button-->
		<footer class="page-footer " style="background:#23282c;color:white;">
			<p class="mb-0">Copyright Â© 2023. All right reserved.</p>
		</footer>
	</div>
	<!--end wrapper-->

	<!-- search modal -->
    <div class="modal" id="SearchModal" tabindex="-1">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen-md-down">
		  <div class="modal-content">
			<div class="modal-header gap-2">
			  <div class="position-relative popup-search w-100">
				<input class="form-control form-control-lg ps-5 border border-3 border-primary" type="search" placeholder="Search">
				<span class="position-absolute top-50 search-show ms-3 translate-middle-y start-0 top-50 fs-4"><i class='bx bx-search'></i></span>
			  </div>
			  <button type="button" class="btn-close d-md-none" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div class="search-list">
				   <p class="mb-1">Html Templates</p>
				   <div class="list-group">
					  <a href="javascript:;" class="list-group-item list-group-item-action active align-items-center d-flex gap-2 py-1"><i class='bx bxl-angular fs-4'></i>Best Html Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-vuejs fs-4'></i>Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-magento fs-4'></i>Responsive Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-shopify fs-4'></i>eCommerce Html Templates</a>
				   </div>
				   <p class="mb-1 mt-3">Web Designe Company</p>
				   <div class="list-group">
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-windows fs-4'></i>Best Html Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-dropbox fs-4' ></i>Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-opera fs-4'></i>Responsive Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-wordpress fs-4'></i>eCommerce Html Templates</a>
				   </div>
				   <p class="mb-1 mt-3">Software Development</p>
				   <div class="list-group">
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-mailchimp fs-4'></i>Best Html Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-zoom fs-4'></i>Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-sass fs-4'></i>Responsive Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-vk fs-4'></i>eCommerce Html Templates</a>
				   </div>
				   <p class="mb-1 mt-3">Online Shoping Portals</p>
				   <div class="list-group">
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-slack fs-4'></i>Best Html Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-skype fs-4'></i>Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-twitter fs-4'></i>Responsive Html5 Templates</a>
					  <a href="javascript:;" class="list-group-item list-group-item-action align-items-center d-flex gap-2 py-1"><i class='bx bxl-vimeo fs-4'></i>eCommerce Html Templates</a>
				   </div>
				</div>
			</div>
		  </div>
		</div>
	  </div>
    <!-- end search modal -->



	<!--start switcher-->
	<!--<div class="switcher-wrapper">-->
	<!--	<div class="switcher-btn"> <i class='bx bx-cog bx-spin'></i>-->
	<!--	</div>-->
	<!--	<div class="switcher-body">-->
	<!--		<div class="d-flex align-items-center">-->
	<!--			<h5 class="mb-0 text-uppercase">Theme Customizer</h5>-->
	<!--			<button type="button" class="btn-close ms-auto close-switcher" aria-label="Close"></button>-->
	<!--		</div>-->
	<!--		<hr/>-->
	<!--		<h6 class="mb-0">Theme Styles</h6>-->
	<!--		<hr/>-->
	<!--		<div class="d-flex align-items-center justify-content-between">-->
	<!--			<div class="form-check">-->
	<!--				<input class="form-check-input" type="radio" name="flexRadioDefault" id="lightmode" checked>-->
	<!--				<label class="form-check-label" for="lightmode">Light</label>-->
	<!--			</div>-->
	<!--			<div class="form-check">-->
	<!--				<input class="form-check-input" type="radio" name="flexRadioDefault" id="darkmode">-->
	<!--				<label class="form-check-label" for="darkmode">Dark</label>-->
	<!--			</div>-->
	<!--			<div class="form-check">-->
	<!--				<input class="form-check-input" type="radio" name="flexRadioDefault" id="semidark">-->
	<!--				<label class="form-check-label" for="semidark">Semi Dark</label>-->
	<!--			</div>-->
	<!--		</div>-->
	<!--		<hr/>-->
	<!--		<div class="form-check">-->
	<!--			<input class="form-check-input" type="radio" id="minimaltheme" name="flexRadioDefault">-->
	<!--			<label class="form-check-label" for="minimaltheme">Minimal Theme</label>-->
	<!--		</div>-->
	<!--		<hr/>-->
	<!--		<h6 class="mb-0">Header Colors</h6>-->
	<!--		<hr/>-->
	<!--		<div class="header-colors-indigators">-->
	<!--			<div class="row row-cols-auto g-3">-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor1" id="headercolor1"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor2" id="headercolor2"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor3" id="headercolor3"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor4" id="headercolor4"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor5" id="headercolor5"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor6" id="headercolor6"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor7" id="headercolor7"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator headercolor8" id="headercolor8"></div>-->
	<!--				</div>-->
	<!--			</div>-->
	<!--		</div>-->
	<!--		<hr/>-->
	<!--		<h6 class="mb-0">Sidebar Colors</h6>-->
	<!--		<hr/>-->
	<!--		<div class="header-colors-indigators">-->
	<!--			<div class="row row-cols-auto g-3">-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor1" id="sidebarcolor1"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor2" id="sidebarcolor2"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor3" id="sidebarcolor3"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor4" id="sidebarcolor4"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor5" id="sidebarcolor5"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor6" id="sidebarcolor6"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor7" id="sidebarcolor7"></div>-->
	<!--				</div>-->
	<!--				<div class="col">-->
	<!--					<div class="indigator sidebarcolor8" id="sidebarcolor8"></div>-->
	<!--				</div>-->
	<!--			</div>-->
	<!--		</div>-->
	<!--	</div>-->
	<!--</div>-->
	<!--end switcher-->
	<!-- Bootstrap JS -->
	
 
<!--plugins-->
 
 
<script src="{{asset('/assets/plugins/vectormap/jquery-jvectormap-2.0.2.min.js')}}"></script>
<script src="{{asset('/assets/plugins/vectormap/jquery-jvectormap-world-mill-en.js')}}"></script>
<script src="{{asset('/assets/plugins/datatable/js/dataTables.bootstrap5.min.js')}}"></script>
<script src="{{asset('/assets/plugins/chartjs/js/chart.js')}}"></script>
<script src="{{asset('/assets/js/index.js')}}"></script>
<script src="{{asset('assets/js/bootstrap.bundle.min.js')}}"></script>
<!--plugins-->
<script src="{{asset('assets/js/jquery.min.js')}}"></script>
<script src="{{asset('assets/plugins/simplebar/js/simplebar.min.js')}}"></script>
<script src="{{asset('assets/plugins/metismenu/js/metisMenu.min.js')}}"></script>
<script src="{{asset('assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js')}}"></script>
<!--app JS-->
<script src="{{asset('assets/js/app.js')}}"></script>
	
<!--notification js -->

<script src="{{asset('assets/plugins/notifications/js/notification-custom-script.js')}}"></script>
<script src="{{asset('assets/plugins/notifications/js/lobibox.min.js')}}"></script>
<script src="{{asset('assets/plugins/notifications/js/notifications.min.js')}}"></script>

	
    <script>
    new PerfectScrollbar(".app-container")
    </script>

 
<script src="{{asset('/assets/plugins/datatable/js/jquery.dataTables.min.js')}}"></script>
<script>
    $(document).ready(function() {
        $('#example').DataTable();
    });
</script>
<script>
    $(document).ready(function() {
        var table = $('#example2').DataTable({
            lengthChange: false,
            buttons: ['copy', 'excel', 'pdf', 'print']
        });

        table.buttons().container()
            .appendTo('#example2_wrapper .col-md-6:eq(0)');
    });
</script>

<script>
  
    function myfunction() {
      $(document).ready(function() {
        let user_id = document.getElementById("uid").value;
        sessionStorage.setItem("user", user_id);
        $.ajax({
          url: '{{ url("/getusersavingwalletAmount") }}',
          type: 'POST',
          data: {
            user_id: user_id
          },
          cache: false,
          success: function(dataResult) {
              
            var dataResult = JSON.parse(dataResult);
            console.log(dataResult);
            if(dataResult.status == 'success') {
              let wallet_amt = dataResult.data.saving_wallet;
            //   document.getElementById("name").value = dataResult.data.first_name;
            //   document.getElementById("contact").value = dataResult.data.contact;
            //   document.getElementById("city").value = dataResult.data.city;
            //   document.getElementById("state").value = dataResult.data.state;
            //   document.getElementById("pin_code").value = dataResult.data.zip;
              document.getElementById("wallet").innerHTML = wallet_amt;
            //   document.getElementById("invoice_no").value = dataResult.data.invoice_no;
            
              let total = document.getElementById("total").value;
              if(total > wallet_amt) {
                //   document.getElementById("button_status").disabled = false;
                } else {
                //   alert(total);
                // document.getElementById("button_status").disabled = true;
              }
            }
          }
        } );
      } );
    }
  </script>


<script>

    function getusers(){
            
              var searchdata=$("#search_client").val(); 
              
              $.ajax({
                      url : '{{route("searchClient")}}',
                      data: {"sdata":searchdata, "_token": "{{ csrf_token() }}"},
                      type: "POST",
                      success : function(response) { 
                         
                          $("#searchDatas").css('display', 'block');
                          $("#searchDatas").html(response);
                      }  
                });

        }


        function selectVal(id){
                
                $("#search_client").val($("#aaa"+id).text());
                $("#searchDatas").css('display', 'none');
                $("#customer_name").text($("#name"+id).val());
                $("#customer_name").val($("#name"+id).val());
                $("#customer_id").val($("#uid"+id).val());
                $("#customer_address").val($("#address"+id).val());
                $("#city").val($("#city"+id).val());
                $("#state").val($("#state"+id).val());
                $("#zip").val($("#zip"+id).val());
                $("#customer_address").text($("#address"+id).val());
                $("#city").text($("#city"+id).val());
                $("#state").text($("#state"+id).val());
                $("#zip").text($("#zip"+id).val());
                $("#customer_email").text($("#email"+id).val());
                $("#customer_email").val($("#email"+id).val());
                $("#customer_phone").text($("#mobile"+id).val());
                $("#customer_phone").val($("#mobile"+id).val());
                $("#wallet").text($("#saveWallet"+id).val());
                

        }

        function selectValss(id){
            
                $("#customer").val($("#aaa"+id).text());
                $("#customer_id").val($("#uid"+id).val());
                $("#lidata").css('display', 'none');
                $("#customer_name").text($("#name"+id).val());
                $("#customer_address").text($("#address"+id).val());
                $("#customer_addresss").val($("#address"+id).val());
                $("#city").text($("#city"+id).val());
                $("#cityy").val($("#city"+id).val());
                $("#state").text($("#state"+id).val());
                $("#statee").text($("#state"+id).val());
                $("#zip").text($("#zip"+id).val());
                $("#zipp").val($("#zip"+id).val());
                $("#customer_email").text($("#email"+id).val());
                 $("#customer_emaill").val($("#email"+id).val());
                $("#customer_phone").text($("#mobile"+id).val());
                $("#customer_phonee").val($("#mobile"+id).val());

       }

        $('#pfranchise').change(function(){
              var id=$(this).val();
              $.ajax({
                      url : '{{url("/getfrachiseDiscount")}}',
                      data: {"id":id, "_token": "{{ csrf_token() }}"},
                      type: "POST",
                      success : function(response) { 
                        var data = JSON.parse(response);
                        var commission=data.commission;
                        $("#referal").val(data.uid);

                        function myFunction(selector) {
                            for (let i = 1; i < commission; i++) {
                               selector.options[i] = new Option(i,i);
                            }
                        }
                        //usage:
                        myFunction(document.getElementById("franchise_discount"));
                    
                      }  
                });

        });
        
        
        
       
        function ProductSearch(){
            var sdata=$("#searchProduct").val();
            $.ajax({
                      url : '{{url("/product_search")}}',
                      data: {"sdata":sdata, "_token": "{{ csrf_token() }}"},
                      type: "POST",
                      success : function(response) { 
                          // alert(response);
                          $("#searchpDatas").css('display', 'block');
                          $("#searchpDatas").html(response);
                       
                      }  
                });
        }
        var all_products =[];



$(document).on('change','.products',function(){

$(this).attr('readonly',true);
$(this).css('pointer-events','none');
var current_row = $(this).closest('tr');
$(current_row).find('.bill_type').css('pointer-events','');
$(current_row).find('.bill_type').removeAttr('readonly');
var quantity = $(current_row).find(".quantity").val();

product_id =$(current_row).find('.products').val(); 

$.ajax({

url : '{{route("get_product_details")}}',
data: {"product_id":product_id , "_token": "{{ csrf_token() }}"},
type: "POST",
success: function(response){
 
    all_products.push(response);
    
    sessionStorage.setItem('products_detail', JSON.stringify(response));
    sessionStorage.getItem('products_detail');
    var price = response.price;
 }
})

});

        $(document).on('change','.bill_type',function(){
            //  console.log(product_details);
            var current_row = $(this).closest('tr');
            var current_bill_type = $(this).val();
            
         
            current_row.find('.bill_type').attr('readonly',true);
            $(this).css('pointer-events','none');
            current_row.find('.quantity').removeAttr('readonly');
            var quantity=current_row.find('.quantity').val(1);
            
            products_detail = JSON.parse(sessionStorage.getItem('products_detail'));
            // alert(products_detail);die;
            if(current_bill_type == 'mrp'){
                
               $(current_row).find(".price").val(products_detail['0']['mrp']); 
            }else if(current_bill_type == 'dp'){
                $(current_row).find(".price").val(products_detail['0']['price']);
            }

            $(current_row).find(".sp").val(products_detail['0']['sp']);
            $(current_row).find(".bv").val(products_detail['0']['business_value']);
           
            update_product_details(current_row);
            calculate_row_total(current_row);
            calculate_total_amount();

            $(".gip").css('display', 'block');

        });





    function changeDiscount(dis){
            $.ajax({
            url : '{{route("getAllTypeDiscount")}}',
            data: {"discount":dis , "_token": "{{ csrf_token() }}"},
            type: "POST",
            success : function(response) {
               alert(response);
             },
            }); 
        }




       
        $(document).on('input','.quantity',function(){
        
        products_detail = JSON.parse(sessionStorage.getItem('products_detail'));
        
        var current_row = $(this).closest('tr');
        var quantity=$(current_row).find('.quantity').val();
        var stockQty=products_detail['0']['quantity'];
      
       
        sp = products_detail['0']['sp'];
        bv = products_detail['0']['business_value'];
        
        $(current_row).find('.sp').val(sp*1 *quantity*1)
        $(current_row).find('.bv').val(bv*1 *quantity*1)
        update_product_details(current_row);
        calculate_row_total(current_row);
        calculate_total_amount();

           
        if(quantity<=stockQty){
            
            $(".gip").css('display', 'block');
            console.log(quantity);
            console.log(stockQty);
        }else{
           
            $(".gip").css('display', 'none');
            console.log(quantity);
            console.log(stockQty);
        }
    });
       
       
       function update_product_details(current_row){
           
        row_index = current_row.index();
        quantity = $(current_row).find(".quantity").val();
        sp = $(current_row).find(".sp").val();
        price = $(current_row).find(".price").val();
        bill_type = $(current_row).find(".bill_type").val();
        // console.log(all_products[row_index]);
        row_data= all_products[row_index];
        row_data.quantity = quantity;
        row_data.sp = sp;
        row_data.price = price;
        row_data.bill_type = bill_type;
        all_products[row_index]=row_data;
        $('#all_products').val(JSON.stringify(all_products));
        // console.log(all_products);
        
       }
       
     function calculate_row_total(current_row){
        price = $(current_row).find('.price').val()
        qty = $(current_row).find('.quantity').val();
        row_total = (price*1) * (qty*1);
        $(current_row).find('.amount').val(row_total);
      } 
      
    
      
function calculate_total_amount(){
            total_amount = 0;
            total_quantity = 0;
            total_sp =0;
            total_bv =0;
            var all_amount = document.querySelectorAll('.amount');
            var all_quantity = document.querySelectorAll('.quantity');
            var all_sp = document.querySelectorAll('.sp');
            var all_bv = document.querySelectorAll('.bv');
            
            $.each(all_amount, function (key,value) {
             {
                var total_wallet= $('#wallet').text()*1;
                total_amount += value.value*1;
              
                // console.log(total);
                // console.log(total_amount);
                if(total_wallet > total_amount) {
                  document.getElementById("button_status").disabled = false;
                } else {
                //   alert(total_wallet > total_amount);
                document.getElementById("button_status").disabled = true;
              }
             }
             
            });
            $.each(all_quantity, function (key,value) {
             {
                total_quantity += value.value*1;
             }
             });
             $.each(all_sp, function (key,value) {
             {
                total_sp += value.value*1;
             }
             });
             $.each(all_bv, function (key,value) {
             {
                total_bv += value.value*1;
             }
             });
    
    $('#subtotal').text(total_amount+" Rs");
    $('#total').text(total_amount+" Rs");
    $('#total_amount').val(total_amount);
    $('#total_quantity').val(total_quantity);
    $('#total_sp').val(total_sp);
    $('#total_bv').val(total_bv);
    $('#total_bv1').text(total_bv+" Rs");
    $('#total_sp1').text(total_sp +" Rs");
    // $('#all_products').val(all_products);
    // update_product_details()
    $('#all_products').val(JSON.stringify(all_products));
    }



    
</script>
<script>
    
        
    $(document).on('click','.removeRow',function(){
        var row_index = $(this).closest('tr').index();
        all_products.splice(row_index, 1);

        $(this).closest('tr').remove();
        
        calculate_total_amount();
    })
    // window.location.href = 'sell_products.php';
</script>

<script>
    
    function getdata(form) {
     
      var settings = {
         url: '{{ route("getData") }}',
         method: "POST",
         timeout: 0,
         processData: false,
         mimeType: "multipart/form-data",
         contentType: false,
         data: form,
       };

      return $.ajax(settings).done(function (response) {
          var dataResult = response;
          dataResult;
          
          
      });


    }



function addProductRow(){
          
              $(document).ready(function() {
              var form = new FormData();
              
              form.append("flag", "get_product");
              form.append("_token", "{{csrf_token()}}");
              
              getdata(form).then(result => {
                  
                    var response=JSON.parse(result);
                    // console.log(response);
                    //  console.log(response.data[0].name);
                    var options = "<select class='form-control products'><option>Select Product</option>";
                     for (var x in response.data) {
                        // console.log(response.data[x].id);
                        // console.log(response.data[x].name);
                        options += "<option value="+response.data[x].id+">"+response.data[x].name+"</option>";
                        
                      }
                      options+="</select>";
                    //   console.log(options);
                    
                      var row =''; 
                      row+= `<tr>
                                                  
                                              
                                                  <td>
                                                     ${options}
                                                  </td>
                                                  
                                                  
                                                  <td>
                                                      <select name ="bill_type" class ="form-control bill_type" style="width: 90px;pointer-events:none" readonly>
                                                        <option value ="">Bill Type</option>
                                                        <option value ="mrp">MRP</option>
                                                        <option value ="dp">DP</option>
                                                      </select>
                                                  </td>
                                                  
                                                  <td>
                                                      <input type = "text" name="quantity" value="" class ="form-control quantity" style="" readonly>
                                                  </td>
                                                  <td>
                                                      <input type = "text" name="price" class ="form-control price" readonly>
                                                  </td>
                                                  <td>
                                                      <input type = "text" name="sp" class ="form-control sp"  style="width: 82px;" readonly>
                                                  </td>
                                                  <td>
                                                      <input type = "text" name="bv" class ="form-control bv" style="width: 82px;" readonly>
                                                  </td>
                                                  <td>
                                                      <input type = "text" name="amount" class ="form-control amount"  style="width: 82px;" readonly>
                                                  </td>
                                                  
                                                  <td><span><i class ="fa fa-trash text-danger removeRow" style ="cursor:pointer;display:none"></i></span>
                                                  <span><i class ="fa fa-plus text-success addRow" style ="cursor:pointer"></i></span></td>
                                                  `
                                               
                 console.log(row);
                 $('#productsssss').append(row); 
              }).catch(error => {
                  console.log(error);
              })
          });
          }
          
          addProductRow();
          
         $(document).on('click','.addRow',function(){
            
                  var current_row = $(this).closest('tr');
                  $(current_row).find('.removeRow').css('display','block');
                  $(this).remove();
                  addProductRow(); 
          });
</script>

<script>
    function addtocartproduct(id){
            $.ajax({
            type: 'post',
            url: '{{ route("addtocart") }}',
            data: {'id':id, "_token":"{{csrf_token()}}"},
            success: function (data) {
                if(data==0){
                 
                  $('#outofStock'+id).text('Out Of Stock');
                }else{
                     $("#tablerow").html(data);
                     $("#countinue_sale").css('display', 'block');
                }
               
            }
        }); 
    }

    function deleteCartItem(id){
            $.ajax({
            type: 'post',
            url: '{{ route("deleteItemCart") }}',
            data: {'id':id, "_token":"{{csrf_token()}}"},
            success: function (data) {
                $("#tablerow").html(data);
            }
        }); 
    }

    function updateQty(id){
            var qty=$("#quantity"+id).val();
            $.ajax({
            type: 'post',
            url: '{{ route("Qtyupdate") }}',
            data: {'id':id, 'qty':qty, "_token":"{{csrf_token()}}"},
            success: function (data) {
              
                var obj=JSON.parse(data);
              
                var total=obj.qty*obj.price;
                var idd=obj.id;
                $("#quantity"+idd).val(obj.qty);
                $("#price"+idd).text(obj.price);
                $("#total"+idd).text(total);
                $("#subtotal").text(obj.subtotal);
                
                
            }
        }); 
            
    }

    
        function searchdatas(){
            var searchdata=$("#customer").val(); 
            $.ajax({
            type: 'post',
            url: '{{ route("searchClientsss") }}',
            data: {"sdata":searchdata,"_token":"{{csrf_token()}}"},
            success: function (data) {
             $("#lidata").html(data);
             $("#lidata").css('display', 'block');
            }
        }); 
       }
     



 function getsubcategory(id){
  
            $.ajax({
            type: 'post',
            url: '{{ route("getsubcategory") }}',
            data: {'id':id, "_token":"{{csrf_token()}}"},
            success: function (data) {
                 $("#subcategory_id").html(data);
            }
        }); 
            
    }
    
 $(function(){
    var dtToday = new Date();
    
    var month = dtToday.getMonth() + 1;
    var day = dtToday.getDate();
    var year = dtToday.getFullYear();
    if(month < 10)
        month = '0' + month.toString();
    if(day < 10)
        day = '0' + day.toString();
        var maxDate = year + '-' + month + '-' + day;
        $('#txtDate').attr('min', maxDate);
    });    
    
</script>

<script>
    function uploadRecord(){
        var customer=$("#customer").val();
        var invoicedate=$("#invoicedate").val();
        var payment_method=$("#payment_method").val();
        if(customer==''){
          
                Lobibox.notify('error', {
                pauseDelayOnHover: true,
                size: 'mini',
                rounded: true,
                delayIndicator: false,
                icon: 'bx bx-x-circle',
                continueDelayOnInactiveTab: false,
                position: 'top right',
                msg: 'Customer field must be required.'
                });
            
        }else if(invoicedate==''){
               
                Lobibox.notify('error', {
                pauseDelayOnHover: true,
                size: 'mini',
                rounded: true,
                delayIndicator: false,
                icon: 'bx bx-x-circle',
                continueDelayOnInactiveTab: false,
                position: 'top right',
                msg: 'Invoicedate field must be required.'
                });
        }else if(payment_method==''){
         
               
                
                 Lobibox.notify('error', {
                pauseDelayOnHover: true,
                size: 'mini',
                rounded: true,
                delayIndicator: false,
                icon: 'bx bx-x-circle',
                continueDelayOnInactiveTab: false,
                position: 'top right',
                msg: 'Payment method field must be required.'
                });
        }
        else{
           
           var data=$('#myform').serialize();
           $.ajax({
                    type: 'post',
                    url: '{{route("uploarData")}}',
                    data: {'data':data, '_token':"{{ csrf_token()}}"},
                    success: function (data) {
                     
                         if(data==0){
                            
                                
                                
                                Lobibox.notify('error', {
                                pauseDelayOnHover: true,
                                size: 'mini',
                                rounded: true,
                                delayIndicator: false,
                                icon: 'bx bx-x-circle',
                                continueDelayOnInactiveTab: false,
                                position: 'top right',
                                msg: 'No product available in cart so please cart at least one product'
                                });
                         }else if(data==1){
                             
                               
                                Lobibox.notify('success', {
                                pauseDelayOnHover: true,
                                size: 'mini',
                                rounded: true,
                                icon: 'bx bx-check-circle',
                                delayIndicator: false,
                                continueDelayOnInactiveTab: false,
                                position: 'top right',
                                msg: 'Order has been successfully created.'
                                });
                                
                                
                                var url = "{{ route('create_invoice') }}";
                                location.href = url;
                                
                                  
                         }else if(data==10){
                             
                                
                                  
                                Lobibox.notify('error', {
                                pauseDelayOnHover: true,
                                size: 'mini',
                                rounded: true,
                                delayIndicator: false,
                                icon: 'bx bx-x-circle',
                                continueDelayOnInactiveTab: false,
                                position: 'top right',
                                msg: 'Coupon code has been expired.'
                                });
                         }else if(data==11){
                           
                                
                                   Lobibox.notify('error', {
                                pauseDelayOnHover: true,
                                size: 'mini',
                                rounded: true,
                                delayIndicator: false,
                                icon: 'bx bx-x-circle',
                                continueDelayOnInactiveTab: false,
                                position: 'top right',
                                msg: 'This coupon code can be used only once.'
                                });
                              
                         }else if(data==2){
                            
                             
                                Lobibox.notify('error', {
                                pauseDelayOnHover: true,
                                size: 'mini',
                                rounded: true,
                                delayIndicator: false,
                                icon: 'bx bx-x-circle',
                                continueDelayOnInactiveTab: false,
                                position: 'top right',
                                msg: 'Cart amount must be less than wallet amount.'
                                });
                              
                                
                         }
                         
                     
                    }
                       
                });  
        }
        
    }
    

function getCouponCodeDiscount(code){
    var total=$("#subtotal").text();
    // var num=parseInt(total);  
    $.ajax({
                    type: 'post',
                    url: '{{route("getCouponCodeDiscount")}}',
                    data: {'code':code, '_token':"{{ csrf_token()}}"},
                    success: function (data) {
                       
                       var obj=JSON.parse(data);
                       if(obj.status==1){
                        //   var subtotal=num-parseInt(obj.discount);
                        //   $("#subtotals").text(subtotal);
                        //   $("#subtotal").text(subtotal);
                           $("#messagesss").css('display', 'block');
                           $("#messagesss").text(obj.discount);
                           $("#subtotal").text(obj.discounts);
                           $('#messagesss').addClass('badge bg-danger');
                        }else if(obj.status==2){
                        //   var subtotal=num-parseInt(obj.discount);
                        //     $("#subtotal").text(subtotal); 
                        //   $("#subtotals").text(subtotal);
                           $("#messagesss").css('display', 'block');
                           $("#messagesss").text(obj.discount);
                            $("#subtotal").text(obj.discounts);
                           $('#messagesss').addClass('badge bg-danger');
                        }else if(obj.status==3){
                           $("#messagesss").css('display', 'block');
                           $("#messagesss").text(obj.msg);
                           $('#messagesss').addClass('badge bg-danger');
                        }else if(obj.status==00){
                           
                           $("#messagesss").css('display', 'block');
                           $("#messagesss").text(obj.msg);
                           $('#messagesss').removeClass('badge bg-danger');
                        }
                    }
                       
                });  
}    


function getProducts(id){
     $.ajax({
            type: 'post',
            url: '{{ route("getProducts") }}',
            data: {'id':id, "_token":"{{csrf_token()}}"},
            success: function (data) {
                   $("#table").html(data);
             
            }
        }); 
}

function getval(val,id){
    $.ajax({
            type: 'post',
            url: '{{ route("changeOrderStatus") }}',
            data: {'status':val,'id':id, "_token":"{{csrf_token()}}"},
            success: function (data) {
                 if(data==1){
                     location.reload();
                 }
             
            }
        }); 
}
   
</script>

  <script>
   function generatePDF() {
        const element = document.getElementById('printableArea');
        html2pdf()
            .from(element)
            .save();

    }
    
   

 function changeStatess(){
        var id=$("#stateid").val();
        var cityname=$("#cityname").val();
        $.ajax({
            type: 'post',
            url: '{{ route("getCitiess") }}',
            data: {'id':id, 'cityname':cityname, "_token":"{{csrf_token()}}"},
            success: function (data) {
              $("#city").html(data);
            }
        }); 
     }
     changeStatess();
     
     
      function changeLevelvalue(id){
        
           var level=$("#level"+id).val();
            
           $.ajax({
            url : '{{route("updatelevel")}}',
            data: {"level":level , "id":id , "_token":"{{csrf_token()}}"},
            type: "POST",
            success : function(response) {
              if(response==1){
                  echo "Hi";
              }
              if(response==0){
                  echo "No";
              }
             },
            }); 
        
    } 
  </script> 
</body>

</html>